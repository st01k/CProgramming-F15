#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void translate (char* pWord);

int main (void)
{
    const int MAXLN = 81;

    char  eSentence[MAXLN];                 //user input sentence
    char* pESnt = eSentence;                //pointer to sentence
    char* token;                            //word holder

    printf("English to Pig Latin Translator\n\n");
    printf("Type a sentence in lower case letters, without punctuation, and press Enter: \n\n");
    gets(eSentence);
    printf("\n");

    token = strtok(pESnt, " ");             //token gets first word
    translate(token);                       //first word is translated

    while (token != NULL)
    {
        token = strtok(NULL, " ");          //token gets subsequent words
        translate(token);                   //words are translated as token is repopulated with new word
    }

    return 0;
}
//----------------------------------------------------------------------------
// translates and prints the word passed to it
void translate (char* pWord)
{
    const char* pVOWELS = "aeiou";

    int   diff;                                 //difference in mem addresses for attaching consonant prefix
    char* wToken;                               //word with consonant prefix removed & base of concatenation
    char* tWord;                                //temp word holder for token readdressing
    char* suffix = "ay";                        //'ay' suffix

    if (!(tWord = calloc((strlen(pWord) + 1), sizeof(char*)))) exit (1);    //allocates mem for temp word
    strncpy(tWord, pWord, strlen(pWord));       //copies current token to temp holder
    wToken = strpbrk(tWord, pVOWELS);           //finds first vowel and cuts off the preceeding characters
    diff = wToken - tWord;                      //finds how many letters were cut off
    strncat(wToken, tWord, diff);               //appends consonant prefix to wToken
    strcat(wToken, suffix);                     //appends suffix to wToken
    printf("%s ", wToken);                      //print wToken

    return;
}
